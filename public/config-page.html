<!DOCTYPE html>
<html lang="en">

<head>
  <script type="text/javascript" src="https://connect-cdn.atl-paas.net/all.js"></script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114996686-1"></script>
  <script type="text/javascript" src="js/google-analytics.js?version=2022.01"></script>
  <script type="text/javascript" src="js/common.js?version=2023.08.01"></script>

  <title>Configuration</title>
  <script>
    async function downgradeAllSpaces(userId) {
      const spaces = await getSpaces();
      return await Promise.all(spaces.map(space => downgrade(userId, space.key)));
    }

    async function startDowngrade() {
      console.log('Downgrade - processing all spaces');
      AP.user.getCurrentUser(async (u) => await downgradeAllSpaces(u.atlassianAccountId));
    }
  </script>

  <script type="text/javascript" src="js/util.js"></script>

</head>

<body>
  <!-- Todo: Downgrade button, list to-be-upgraded pages -->
  <div>
    <button onclick="startDowngrade()">Downgrade</button>
  </div>
</body>

</html>